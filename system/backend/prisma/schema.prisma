generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model vw_cliente {
  id_cliente       Int           @id @default(autoincrement())
  cpf_cnpj         String?       @db.VarChar(14)
  nome_cliente     String?       @db.VarChar(75)
  telefone_cliente String        @db.Char(13)
  vw_cobranca      vw_cobranca[]
}

model vw_cobranca {
  id_cobranca            Int         @id @default(autoincrement())
  pedido_id_pedido       Int?
  empresa_id_empresa     Int
  cliente_id_cliente     Int?
  data_cobranca          DateTime    @default(now()) @db.Timestamp(0)
  metodo_pagamento       String      @db.VarChar(45)
  valor_cobranca         Decimal     @db.Decimal(10, 2)
  status_cobranca        String      @db.Char(1)
  descricao_cobranca     String      @db.VarChar(45)
  num_parcela            Int
  vencimento_cobranca    DateTime?   @db.DateTime(0)
  codigo_pix_transaction String?     @db.VarChar(255)
  codigo_pix_cobranca    String?     @db.VarChar(255)
  vw_cliente             vw_cliente? @relation(fields: [cliente_id_cliente], references: [id_cliente], onDelete: NoAction, onUpdate: NoAction, map: "fk_VW_Cobranca_VW_Cliente1")
  vw_empresa             vw_empresa  @relation(fields: [empresa_id_empresa], references: [id_empresa], onDelete: NoAction, onUpdate: NoAction, map: "fk_VW_Cobranca_VW_Empresa1")
  vw_pedido              vw_pedido?  @relation(fields: [pedido_id_pedido], references: [id_pedido], onDelete: NoAction, onUpdate: NoAction, map: "fk_VW_Cobranca_VW_Pedido1")

  @@index([cliente_id_cliente], map: "fk_VW_Cobranca_VW_Cliente1_idx")
  @@index([empresa_id_empresa], map: "fk_VW_Cobranca_VW_Empresa1_idx")
  @@index([pedido_id_pedido], map: "fk_VW_Cobranca_VW_Pedido1_idx")
}

model vw_empresa {
  id_empresa        Int              @id @default(autoincrement())
  nome_empresa      String           @db.VarChar(45)
  celular_empresa   String           @db.Char(13)
  email_empresa     String           @db.VarChar(75)
  uf_empresa        String?          @db.Char(2)
  cidade_empresa    String?          @db.VarChar(45)
  tipo_pix_empresa  String?          @db.VarChar(15)
  chave_pix_empresa String?          @db.VarChar(45)
  cpf_cnpj_empresa  String?          @db.Char(14)
  senha_empresa     String?          @db.VarChar(45)
  vw_cobranca       vw_cobranca[]
  vw_item_pedido    vw_item_pedido[]
  vw_pedido         vw_pedido[]
  vw_produto        vw_produto[]
}

model vw_item_pedido {
  VW_Pedido_id_pedido   Int
  VW_Empresa_id_empresa Int
  VW_Produto_id_produto Int
  quantidade_produto    Int
  valor_pedido          Decimal    @db.Decimal(10, 2)
  vw_empresa            vw_empresa @relation(fields: [VW_Empresa_id_empresa], references: [id_empresa], onDelete: NoAction, onUpdate: NoAction, map: "fk_VW_Item_Pedido_VW_Empresa1")
  vw_pedido             vw_pedido  @relation(fields: [VW_Pedido_id_pedido], references: [id_pedido], onDelete: NoAction, onUpdate: NoAction, map: "fk_VW_Produto_has_VW_Pedido_VW_Pedido1")
  vw_produto            vw_produto @relation(fields: [VW_Produto_id_produto], references: [id_produto], onDelete: NoAction, onUpdate: NoAction, map: "fk_VW_Produto_has_VW_Pedido_VW_Produto1")

  @@id([VW_Pedido_id_pedido, VW_Produto_id_produto])
  @@index([VW_Empresa_id_empresa], map: "fk_VW_Item_Pedido_VW_Empresa1_idx")
  @@index([VW_Pedido_id_pedido], map: "fk_VW_Produto_has_VW_Pedido_VW_Pedido1_idx")
  @@index([VW_Produto_id_produto], map: "fk_VW_Produto_has_VW_Pedido_VW_Produto1_idx")
}

model vw_pedido {
  id_pedido          Int              @id @default(autoincrement())
  empresa_id_empresa Int
  valor_total        Decimal          @db.Decimal(10, 2)
  vw_cobranca        vw_cobranca[]
  vw_item_pedido     vw_item_pedido[]
  vw_empresa         vw_empresa       @relation(fields: [empresa_id_empresa], references: [id_empresa], onDelete: NoAction, onUpdate: NoAction, map: "fk_VW_Pedido_VW_Empresa1")

  @@index([empresa_id_empresa], map: "fk_VW_Pedido_VW_Empresa1_idx")
}

model vw_produto {
  id_produto         Int              @id @default(autoincrement())
  empresa_id_empresa Int
  nome_produto       String           @db.VarChar(45)
  descricao_produto  String           @db.VarChar(45)
  valor_produto      Decimal          @db.Decimal(10, 2)
  vw_item_pedido     vw_item_pedido[]
  vw_empresa         vw_empresa       @relation(fields: [empresa_id_empresa], references: [id_empresa], onDelete: NoAction, onUpdate: NoAction, map: "fk_VW_Produto_VW_Empresa")

  @@index([empresa_id_empresa], map: "fk_VW_Produto_VW_Empresa_idx")
}
